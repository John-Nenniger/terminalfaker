var version="1.3.5";var Terminal=(function(){var h=(localStorage.getItem("history")?localStorage.getItem("history").split(","):[]),e=h.length,n={};var f=38,j=40,k=9,c=20;var o="/";var d=function(q,u,p){var t=u.parentNode.cloneNode(true);var s=document.querySelectorAll("[contenteditable=true]");for(var r=0;r<s.length;r++){s[r].setAttribute("contenteditable",false)}if(n.prompt){t.querySelector(".prompt").textContent=n.prompt}if((typeof p!=="undefined")&&p){while(q.firstChild){q.removeChild(q.firstChild)}}q.appendChild(t);t.querySelector(".prompt").innerHTML=n.customPrompt();t.querySelector(".input").innerHTML=" ";t.querySelector(".input").focus()};var b=function(q,r,p){q.innerHTML+="<div>"+(n.commands[r].exe(p))+"</div>"};var l=function(p){if(n.history.length>=c){n.history.shift()}n.history.push(p);localStorage.setItem("history",n.history);n.historyIndex=n.history.length};var a=function(s,u){var t=false;if(u==f&&n.historyIndex>0){s.textContent=n.history[--n.historyIndex];t=true}else{if(u==j){if(n.historyIndex<n.history.length){++n.historyIndex}if(n.historyIndex<n.history.length){s.textContent=n.history[n.historyIndex]}else{s.textContent=" "}t=true}}if(t){try{var p=document.createRange();var r=window.getSelection();p.setStart(s.childNodes[0],s.textContent.length);p.collapse(true);r.removeAllRanges();r.addRange(p)}catch(q){}}};var m=function(q){var p=n.commands,r=new RegExp("^"+q,"ig"),t=[];for(var s in p){if(p.hasOwnProperty(s)&&s.match(r)){t.push(s)}}return t};var i=function(r){if(r=="/"||r=="~"){return"d[path='/'][name='/']"}r=r.replace(/\/+$/,"");var p=r.split("\\").pop().split("/").pop();var q=r.substring(0,r.lastIndexOf("/")+1);return"d[path='"+q+p+"/'][name='"+p+"']"};var g=function(r){var p=r.split("\\").pop().split("/").pop();var q=r.substring(0,r.lastIndexOf("/")+1);return"f[path='"+q+"'][name='"+p+"']"};n.bootTerminalMessage=function(s,q,p,r){if(r==0){s.querySelector(".hidden").style.display="none";q.innerHTML=""}q.innerHTML+=p[r];if(r+1 in p){setTimeout(function(){n.bootTerminalMessage(s,q,p,r+1)},500)}else{s.querySelector(".hidden").style.display="";s.querySelector(".input").focus()}};n.catFile=function(r){var q=null;var p="";if(r.substr(0,1)!="/"){var p=g(n.path+r);var q=n.filesystemPointer.querySelector(p)}if(typeof q==="undefined"||q==null||q.nodeName!="f"){p=g(r);var q=n.filesystem.querySelector(p);if(typeof q==="undefined"||q==null||q.nodeName!="f"){return false}}return q.querySelector("contents").innerHTML};n.changeDirectory=function(r){if(r==".."){if(n.filesystemPointer.getAttribute("name")!="/"){n.filesystemPointer=n.filesystemPointer.parentNode.parentNode;n.path=n.filesystemPointer.getAttribute("path");r=n.path;return true}return true}if(r=="."){return true}var q=null;var p="";if(r.substr(0,1)!="/"){var p=i(n.path+r);var q=n.filesystemPointer.querySelector(p)}if(typeof q==="undefined"||q==null||q.nodeName!="d"){p=i(r);var q=n.filesystem.querySelector(p);if(typeof q==="undefined"||q==null||q.nodeName!="d"){return false}}n.path=q.getAttribute("path");if(n.path.substr(-1)!="/"){n.path+="/"}r=n.path;n.filesystemPointer=q;return true};n.init=function(p,r,s){n.commands=r;n.customPrompt=s;n.history=h;n.historyIndex=e;var q=(localStorage.getItem("filesystem")?localStorage.getItem("filesystem"):originalFilesystem);n.filesystem=(new DOMParser).parseFromString(q,"text/xml");n.path="/";o=n.path;n.filesystemPointer=n.filesystem.querySelector("d");p.addEventListener("keydown",function(u){if(u.keyCode==k){var x=u.target;var w=m(x.textContent.replace(/\s+/g,""));if(w.length==1){x.textContent=w[0];var t=document.createRange();var v=window.getSelection();t.setStart(x.childNodes[0],w[0].length);t.collapse(true);v.removeAllRanges();v.addRange(t)}u.preventDefault(true);return false}});p.addEventListener("keyup",function(t){if(n.historyIndex<0){return}a(t.target,t.keyCode)});p.addEventListener("keypress",function(v){var w=v.target;if(v.keyCode!=13){return false}var t=w.textContent.trim();var u=t.match(/(?=\S)[^"\s]*(?:"[^\\"]*(?:\\[\s\S][^\\"]*)*"[^"\s]*)*/g);u=u.map(function(x){if(x.charAt(0)==='"'&&x.charAt(x.length-1)==='"'){return x.substr(1,x.length-2)}else{return x}});if(u[0]){if(u[0].toLowerCase() in n.commands){b(p,u[0].toLowerCase(),u);l(w.textContent)}else{p.innerHTML+=u[0]+": command not found"}}d(p,w,(u[0].toLowerCase()=="clear"));v.preventDefault()});p.querySelector(".prompt").innerHTML=n.customPrompt();p.querySelector(".input").focus();n.term=p;if((typeof useBootLoader==="undefined")||useBootLoader){n.bootTerminalMessage(document.getElementById("terminal"),document.getElementById("boot"),bootMessageLines,0)}return n};return n})();function extendObject(c,a){for(var b in a){a.hasOwnProperty(b)&&(c[b]=a[b])}return c}var bootMessageLines=["System loading...<br>",(new Date()).toString()+"<br>","&nbsp;_______&nbsp;&nbsp;&nbsp;______&nbsp;<br>|__&nbsp;&nbsp;&nbsp;__|&nbsp;|&nbsp;&nbsp;____|<br>&nbsp;&nbsp;&nbsp;|&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;|__&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;|&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;__|&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;|&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;|_|&nbsp;&nbsp;&nbsp;&nbsp;|_|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>","Terminal Faker version "+version+"<br>","By Sherri Wheeler (SyntaxSeed.com)<br>","Ready. Type 'help' to get started.<br><br>"];"use strict";function _instanceof(b,a){if(a!=null&&typeof Symbol!=="undefined"&&a[Symbol.hasInstance]){return a[Symbol.hasInstance](b)}else{return b instanceof a}}function _classCallCheck(a,b){if(!_instanceof(a,b)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||false;c.configurable=true;if("value" in c){c.writable=true}Object.defineProperty(d,c.key,c)}}function _createClass(c,a,b){if(a){_defineProperties(c.prototype,a)}if(b){_defineProperties(c,b)}return c}var Tea=function(){function j(){_classCallCheck(this,j)}_createClass(j,null,[{key:"encrypt",value:function d(r,o){r=String(r);o=String(o);if(r.length==0){return""}var n=j.strToLongs(j.utf8Encode(r));var m=j.strToLongs(j.utf8Encode(o).slice(0,16));var q=j.encode(n,m);var l=j.longsToStr(q);var p=j.base64Encode(l);return p}},{key:"decrypt",value:function b(l,p){l=String(l);p=String(p);if(l.length==0){return""}var o=j.strToLongs(j.base64Decode(l));var n=j.strToLongs(j.utf8Encode(p).slice(0,16));var q=j.decode(o,n);var r=j.longsToStr(q);var m=j.utf8Decode(r.replace(/\0+$/,""));return m}},{key:"encode",value:function c(x,r){if(x.length<2){x[1]=0}var o=x.length;var B=2654435769;var l=Math.floor(6+52/o);var u=x[o-1],w=x[0];var A,t,s=0;while(l-->0){s+=B;t=s>>>2&3;for(var m=0;m<o;m++){w=x[(m+1)%o];A=(u>>>5^w<<2)+(w>>>3^u<<4)^(s^w)+(r[m&3^t]^u);u=x[m]+=A}}return x}},{key:"decode",value:function h(x,r){var o=x.length;var B=2654435769;var l=Math.floor(6+52/o);var u=x[o-1],w=x[0];var A,t,s=l*B;while(s!=0){t=s>>>2&3;for(var m=o-1;m>=0;m--){u=x[m>0?m-1:o-1];A=(u>>>5^w<<2)+(w>>>3^u<<4)^(s^w)+(r[m&3^t]^u);w=x[m]-=A}s-=B}return x}},{key:"strToLongs",value:function a(o){var m=new Array(Math.ceil(o.length/4));for(var n=0;n<m.length;n++){m[n]=o.charCodeAt(n*4)+(o.charCodeAt(n*4+1)<<8)+(o.charCodeAt(n*4+2)<<16)+(o.charCodeAt(n*4+3)<<24)}return m}},{key:"longsToStr",value:function f(m){var o="";for(var n=0;n<m.length;n++){o+=String.fromCharCode(m[n]&255,m[n]>>>8&255,m[n]>>>16&255,m[n]>>>24&255)}return o}},{key:"utf8Encode",value:function k(l){return unescape(encodeURIComponent(l))}},{key:"utf8Decode",value:function g(l){try{return decodeURIComponent(escape(l))}catch(m){return l}}},{key:"base64Encode",value:function e(l){if(typeof btoa!="undefined"){return btoa(l)}if(typeof Buffer!="undefined"){return new Buffer(l,"binary").toString("base64")}throw new Error("No Base64 Encode")}},{key:"base64Decode",value:function i(l){if(typeof atob=="undefined"&&typeof Buffer=="undefined"){throw new Error("No base64 decode")}try{if(typeof atob!="undefined"){return atob(l)}if(typeof Buffer!="undefined"){return new Buffer(l,"base64").toString("binary")}}catch(m){throw new Error("Invalid ciphertext")}}}]);return j}();var builtInCommands={};builtInCommands.cat={about:"cat [file]<br>&nbsp;&nbsp;Display the contents of the specified file.",exe:function(a){if(a.length!=2){return"No such file."}var b=term.catFile(a[1]);if(b===false){return"No such file, or argument is a directory."}return b}};builtInCommands.cd={about:"cd [path]<br>&nbsp;&nbsp;Change directory to the specified path.",exe:function(a){if(a.length!=2){return""}var b=term.changeDirectory(a[1]);if(!b){return"No such directory."}return""}};builtInCommands.clear={about:"clear<br>&nbsp;&nbsp;Clear the terminal window.",exe:function(){return""}};builtInCommands.encrypt={about:"encrypt [message] [password]<br>&nbsp;&nbsp;Encrypt a provided message using the password.",exe:function(a){if(a.length!=3){return"encrypt: Invalid number of arguments."}var b=Tea.encrypt(a[1],a[2]);console.log(b);return b}};builtInCommands.decrypt={about:"decrypt [encoded] [password]<br>&nbsp;&nbsp;Decrypt a provided message using the password.",exe:function(a){if(a.length!=3){return"decrypt: Invalid number of arguments."}var b=Tea.decrypt(a[1],a[2]);console.log(b);return b}};builtInCommands.help={about:"help [command]<br>&nbsp;&nbsp;Show a list of available commands, or help for a specific command.",exe:function(a){var b="";if(a.length==2&&a[1]&&a[1].toLowerCase() in commands){b+="<strong>"+a[1].toLowerCase()+"</strong>: "+commands[a[1].toLowerCase()].about+""}else{b+="TERMFAKE bash, version "+version+"-release (x86_64-pc-linux-gnu)<br>These shell commands are defined internally.  Type 'help' to see this list.<br>Type 'help name' to find out more about the function 'name'.<br><br>";b+="";Object.keys(commands).sort().forEach(function(c){if(!commands[c].hidden){b+="<strong>"+c+"</strong>&nbsp;&nbsp;"}})}b+="<br><br>";return b}};builtInCommands.history={about:"history [-c]<br>&nbsp;&nbsp;Display the list of recent commands.<br>&nbsp;&nbsp;-c clear the history list.",exe:function(a){if(a.length==2&&a[1]=="-c"){localStorage.setItem("history",[]);term.history=[]}var c=term.history;var b="";c.forEach(function(e,d){b+=d+"&nbsp;&nbsp;"+e+"<br>"});return b}};builtInCommands.ls={about:"ls [-l]<br>&nbsp;&nbsp;List directory contents.<br>&nbsp;&nbsp;-l list contents vertically.",exe:function(a){var c="";var b=Array.prototype.slice.call(term.filesystemPointer.querySelector("c").children);b.forEach(function(e,d){c+="<span class='filesystem-"+e.nodeName+"'>"+e.getAttribute("name")+"</span>";if(a[1]&&a[1]=="-l"){c+="<br>"}else{c+="&nbsp;&nbsp;"}});return c}};builtInCommands.version={about:"version<br>&nbsp;&nbsp;Display the version and attribution of this terminal application.",exe:function(){return"Terminal Faker: version "+version+" https://github.com/syntaxseed/terminalfaker by Sherri Wheeler."}};